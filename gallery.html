<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gallery of Lost & Found</title>
<link href="https://fonts.googleapis.com/css2?family=Delius&display=swap" rel="stylesheet">

<style>
body {
    font-family: "Delius", cursive;
    background: #FFF9F0;
    padding: 30px;
    text-align: center;
}

h1 {
    font-size: 48px;
    color: #1f4d2d;
    margin-bottom: 10px;
}

#itemCount {
    font-size: 26px;
    margin-bottom: 30px;
    color: #1f4d2d;
}

.gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, 180px);
    gap: 25px;
    justify-content: center;
    margin-bottom: 60px;
}

.gallery-item {
    background: white;
    padding: 12px;
    border-radius: 12px;
    border: 2px solid #1f4d2d;
    transition: transform 0.2s;
}

.gallery-item:hover {
    transform: scale(1.03);
}

.gallery-item img {
    width: 160px;
    height: 160px;
    object-fit: contain;
    border-radius: 8px;
}

.delete-btn {
    margin-top: 10px;
    background: #c43a3a;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-family: "Delius", cursive;
    font-size: 18px;
    transition: transform 0.2s;
}

.delete-btn:hover {
    transform: scale(1.05);
    background: #a83232;
}

.back-link {
    position: fixed;
    bottom: 30px;
    left: 30px;
    padding: 12px 20px;
    font-size: 20px;
    text-decoration: none;
    border: 3px solid #1f4d2d;
    border-radius: 12px;
    background: #FFF9F0;
    color: #1f4d2d;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: transform 0.2s, background 0.3s;
}

.back-link:hover {
    transform: scale(1.05);
    background: #e8f4ea;
}

.empty-message {
    font-size: 28px;
    color: #666;
    margin: 40px 0;
}
</style>
</head>

<body>

<h1>Gallery of Lost & Found</h1>
<div id="itemCount">Number of Items: 0</div>

<div id="galleryGrid" class="gallery-grid"></div>

<a href="index.html" class="back-link">‚Üê Back to Pond</a>

<script>
// For demo purposes, we'll use localStorage
// In a real app, this would connect to your backend API
async function loadGallery() {
    // Get items from localStorage (for demo)
    // In a real app, this would be: const items = await fetch("/api/getItems").then(r => r.json());
    const items = JSON.parse(localStorage.getItem('pondItems') || '[]');
    
    document.getElementById("itemCount").innerText = "Number of Items: " + items.length;

    const grid = document.getElementById("galleryGrid");
    grid.innerHTML = "";

    if (items.length === 0) {
        grid.innerHTML = '<div class="empty-message">The gallery is empty. Add some drawings to the pond first!</div>';
        return;
    }

    items.forEach((i, index) => {
        const box = document.createElement("div");
        box.className = "gallery-item";
        // For demo, we use index as ID since we're using localStorage
        // In a real app, you would use i.id
        box.innerHTML = `
            <img src="${i.img}">
            <button class="delete-btn" onclick="deleteItem(${index})">Delete</button>
        `;
        grid.appendChild(box);
    });
}

// For demo purposes, we'll delete from localStorage
// In a real app, this would connect to your backend API
async function deleteItem(index) {
    const pass = prompt("Enter admin password:");
    
    // For demo, we'll use a simple password check
    // In a real app, this would be handled by your backend
    if (pass === "admin123") {
        let items = JSON.parse(localStorage.getItem('pondItems') || '[]');
        items.splice(index, 1);
        localStorage.setItem('pondItems', JSON.stringify(items));
        
        alert("Deleted!");
        loadGallery();
    } else {
        alert("Wrong password.");
    }
    
    // In a real app, this would be the code:
    /*
    const res = await fetch("/api/deleteItem", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "x-admin-secret": pass
        },
        body: JSON.stringify({ id })
    });

    if (res.status === 200) {
        alert("Deleted!");
        loadGallery();
    } else {
        alert("Wrong password.");
    }
    */
}

loadGallery();
</script>

</body>
</html>
